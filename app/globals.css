@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply transition-colors duration-150 ease-out;
  }

  /* 排除输入框的过渡效果，避免闪烁 */
  input,
  textarea,
  select {
    @apply transition-none;
  }

  html {
    @apply scroll-smooth;
  }

  body {
    @apply font-sans antialiased bg-calm-50 text-calm-800;
    font-family: var(--font-inter), -apple-system, BlinkMacSystemFont,
      "Segoe UI", sans-serif;
    line-height: 1.75; /* 改进的行高 - 1.75 符合最佳实践 */
    letter-spacing: -0.01em;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* 标题层次 - 使用一致的字体大小比例 (12 14 16 18 24 32) */
  h1 {
    @apply text-4xl font-bold leading-tight;
  }

  h2 {
    @apply text-2xl font-semibold leading-tight;
  }

  h3 {
    @apply text-xl font-semibold leading-snug;
  }

  h4 {
    @apply text-lg font-medium leading-snug;
  }

  /* 改进的键盘焦点状态 - 更明显的焦点环 (3-4px) */
  *:focus-visible {
    @apply outline-none ring-2 ring-calm-500 ring-offset-2 ring-offset-white;
  }

  /* 触摸目标最小尺寸 - 44x44px (符合可访问性标准) */
  button,
  a,
  [role="button"] {
    @apply min-h-[44px];
  }

  /* 减少动画（尊重用户偏好） */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* Soft UI Evolution 卡片样式 - 改进的阴影和对比度 */
  .card-soft {
    @apply bg-white rounded-2xl shadow-soft border border-calm-100;
  }

  .card-soft-elevated {
    @apply bg-white rounded-2xl shadow-soft-md border border-calm-200;
  }

  .card-soft-hover {
    @apply card-soft transition-all duration-200 ease-out;
  }

  .card-soft-hover:hover {
    @apply shadow-soft-md border-calm-200;
  }

  /* 改进的按钮样式 - Soft UI Evolution */
  .btn-primary {
    @apply bg-calm-500 text-white px-6 py-3 rounded-xl font-semibold text-base
           hover:bg-calm-600 active:scale-[0.98] 
           transition-all duration-200 ease-out
           focus-visible:ring-2 focus-visible:ring-calm-500 focus-visible:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100
           min-h-[44px] min-w-[44px];
  }

  .btn-secondary {
    @apply bg-calm-50 text-calm-700 px-6 py-3 rounded-xl font-semibold text-base
           hover:bg-calm-100 active:scale-[0.98]
           transition-all duration-200 ease-out
           focus-visible:ring-2 focus-visible:ring-calm-500 focus-visible:ring-offset-2
           min-h-[44px] min-w-[44px];
  }

  /* Soft UI 输入框样式 */
  .input-soft {
    @apply w-full px-4 py-3 bg-white border border-calm-200 rounded-xl
           text-base leading-relaxed
           focus:outline-none focus:ring-2 focus:ring-calm-500 focus:border-calm-500
           placeholder:text-calm-400 placeholder:opacity-70
           transition-all duration-150 ease-out
           shadow-soft;
  }

  .input-soft:focus {
    @apply shadow-soft-md;
  }
}

@layer utilities {
  /* 自定义动画 - Soft UI Evolution 风格 (200-300ms) */
  .animate-fade-in {
    animation: fadeIn 200ms ease-out;
  }

  .animate-scale-in {
    animation: scaleIn 200ms ease-out;
  }

  .animate-scale-up {
    animation: scaleUp 200ms ease-out;
  }

  .animate-slide-up {
    animation: slideUp 300ms ease-out;
  }

  /* Custom scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.3);
  }

  .animate-soft-press {
    animation: softPress 200ms ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.96);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes scaleUp {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes softPress {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(0.98);
    }
    100% {
      transform: scale(1);
    }
  }

  /* 间距工具类 - 基于 8px 网格，最小间距 8px */
  .space-section {
    @apply space-y-8;
  }

  .space-component {
    @apply space-y-4;
  }

  .space-tight {
    @apply space-y-2;
  }

  /* 触摸目标间距 - 至少 8px */
  .touch-gap {
    @apply gap-2;
  }
}
